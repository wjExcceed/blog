---
title: 数据链路层的要点
date: 2017-07-29 15:16:54
tags: [record,network]
categories: 聚沙成塔
---
<!--TOC-->

## 主要解决三个基本问题

 1. **封装成帧**
* 封装成帧通过SOH、EOT帧界定符来进行确认帧的边界，将物理层的二进制数据流封装成帧。
<!--more-->
 2. **透明传输**
* 透明传输是通过转义字符来解决的，通过转义字符解决数据内容中存在帧界定符时的特殊情况。
 3. **差错检测**
* 差错检测是近似地认为凡是接收端数据链路层接受的帧均无差错。差错检测分为了无比特差错和无传输差错。
	* 无比特差错：CRC（Cyclic Redundancy Check，循环冗余校验）
	* 无传输差错：帧编号，帧确认和帧重传机制来实现



## MTU

MTU（Maximum Transmission Unit，最大传输单元）：数据链路层数据部分的长度，其默认值是1500字节。MTU不是越大越好，MTU越大意味着传送一个数据包的延迟也越大，bit位发生错误的概率就越大。

## ARP是地址解析协议的工作原理。

1：首先，每个主机都会在自己的ARP缓冲区中建立一个ARP列表，以表示IP地址和MAC地址之间的对应关系。

2：当源主机要发送数据时，首先检查ARP列表中是否有对应IP地址的目的主机的MAC地址，如果有，则直接发送数据，如果没有，就向本网段的所有主机发送ARP数据包，该数据包包括的内容有：源主机 IP地址，源主机MAC地址，目的主机的IP 地址。

3：当本网络的所有主机收到该ARP数据包时，首先检查数据包中的IP地址是否是自己的IP地址，如果不是，则忽略该数据包，如果是，则首先从数据包中取出源主机的IP和MAC地址写入到ARP列表中，如果已经存在，则覆盖，然后将自己的MAC地址写入ARP响应包中，告诉源主机自己是它想要找的MAC地址。

4：源主机收到ARP响应包后。将目的主机的IP和MAC地址写入ARP列表，并利用此信息发送数据。如果源主机一直没有收到ARP响应数据包，表示ARP查询失败。

广播发送ARP请求，单播发送ARP响应。

## RARP的工作原理

RARP是逆地址解析协议，作用是完成硬件地址到IP地址的映射，主要用于无盘工作站，因为给无盘工作站配置的IP地址不能保存。工作流程：在网络中配置一台RARP服务器，里面保存着IP地址和MAC地址的映射关系，当无盘工作站启动后，就封装一个RARP数据包，里面有其MAC地址，然后广播到网络上去，当服务器收到请求包后，就查找对应的MAC地址的IP地址装入响应报文中发回给请求者。因为需要广播请求报文，因此RARP只能用于具有广播能力的网络。
